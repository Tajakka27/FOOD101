(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[727],{"4aa3e38c6d8741f989b9":function(e,t,a){"use strict";a.r(t);var c=a("d7b310f8c35a8daa842c"),r=a("69084d01d3449fc1bc27"),i=a.n(r),n=a("0aaa0910821e6d653bbc"),o=a("0552a8d357e4e0e261a2"),d=a("f30b5d9f424d95576ac9"),s=a("af822b397a35329ca134"),l=a("f3d554ddfb7fca1d1b40"),b=a("c3177b949b62ea8f6520"),u=a("ec2e813ace6500acf219"),p=a("1ba0e65cef72763d067b"),m=a("09bc8f97408891582345"),f=a("8ce852f987578cd02331"),O=a("531ccf8bd04873cb0770"),E=a("eb4ab8692a93d302e615");t.default=e=>{let{countryCode:t,apiKey:a,dps:_,itemsInCart:T,vendor:g,orderTime:j,expeditionType:h,vendorClosed:v,locale:C,apiUrl:y,isPreorderEnabled:S,latitude:D,longitude:I,hasActiveConstraint:w}=e;const[x,A]=Object(r.useState)(void 0),[L,R]=Object(r.useState)(!1),[k,P]=Object(r.useState)(!1),[U,B]=Object(r.useState)(!1),K=Object(r.useRef)(!1),N=Object(s.c)(),H=Object(E.i)(),z=g.metadata.timezone,M=Object(r.useCallback)((()=>{if(!v){const e=new Date(Object(b.d)(null).toLocaleString("en-US",{timeZone:z}));A([{date:e.toISOString().split("T")[0],time_slots:[{time:n.a,text:n.a}]}])}N({type:m.a,payload:!1})}),[N,v,z]),q=Object(r.useCallback)((e=>{const t=e[0],a=t.time_slots[0].time,c=a===n.a,r=j===n.a;let i=!0;if(!r){var o;const t=j.split("T"),a=t[0],c=null===(o=t[1])||void 0===o?void 0:o.slice(0,5),r=e.findIndex((e=>e.date===a));i=!!(r>-1&&c)&&e[r].time_slots.some((e=>e.time===c))}if(r&&!c||!i){let e;a!==n.a&&(e=Object(p.createDateIsoString)(t.date,a,z)),i||void 0!==x||0!==T?N(Object(l.C)(e)):(R(!0),B(!0))}A(e)}),[N,j,z,T,x]);Object(r.useEffect)((()=>{void 0!==x||0!==T||k||K.current||!S||w||(K.current=!0,P(!0),Object(c.getProvider)(t,a,y,{params:{expedition_type:h,vendor_code:g.code,vendor_latitude:g.latitude,vendor_longitude:g.longitude,customer_latitude:D,customer_longitude:I,marketplace:!g.has_delivery_provider,order_time:j,dynamic_pricing:_}}).then((e=>{const t=e.data.timepicker;t.length?q(t):M(),P(!1)})).catch((()=>{M(),P(!1)})))}),[x,t,a,_,T,g,h,j,k,v,M,y,K,D,I,q,S,w]),Object(r.useEffect)((()=>{const e=Object(o.getEvents)();function t(e){k||(e.length?q(e):M())}return e.addListener(d.a.UPDATE_TIMEPICKER,t),()=>{e.removeListener(d.a.UPDATE_TIMEPICKER,t)}}),[M,k,q]),Object(r.useEffect)((()=>{L&&Object(u.q)(h)}),[L,h]);const Z=Object(r.useCallback)((e=>{N(Object(l.C)(e)),B(!1)}),[N]);return i.a.createElement(n.b,{countryCode:t,orderTime:j,schedules:x,locale:C,translate:H,timezone:z,pickerOpen:L,setPickerOpen:R,isDisabled:!S||w,sendTrackingEvent:e=>Object(u.d)(h,e),placeholder:g.vertical===O.a.caterers&&i.a.createElement(f.CaterersTooltip,{translate:H}),updateOrderTime:Z,showOrderTimeUnavailableError:U})}},"8ce852f987578cd02331":function(e,t,a){"use strict";a.r(t),a.d(t,"CaterersTooltip",(function(){return l}));var c=a("47974fb721937c04699a"),r=a("082ff60a1bbb1aa5e44a"),i=a("69084d01d3449fc1bc27"),n=a.n(i),o=a("bbaf4bec45e3e7abc0dc"),d=a.n(o),s=a("41beed847bdf3255404d");const l=e=>{let{translate:t}=e;const[a,o]=Object(i.useState)(!0);return a?n.a.createElement(c.Box,{className:"caterers-time-tooltip",position:"absolute",background:"brand-secondary",borderRadius:"xxs","data-testid":"caterers-time-tooltip",padding:"sm"},n.a.createElement(c.Box,{direction:"row",justifyContent:"space-between",alignItems:"start",marginBottom:"xs"},n.a.createElement(r.Typography,{as:"h5",lineHeight:"spacious",type:"title-md-secondary",paddingRight:"xs",color:"white"},t(s.e.CATERERS_TOOLTIP_HEADER)),n.a.createElement(c.Box,{paddingTop:"xs"},n.a.createElement("button",{onClick:()=>{o(!a)},"data-testid":"caterers-tooltip-close-button","aria-label":t(s.e.CLOSE_BUTTON)},n.a.createElement(d.a,{width:16,height:16,fill:"white"})))),n.a.createElement(r.Typography,{as:"p",type:"paragraph-sm",color:"white"},t(s.e.CATERERS_TOOLTIP_DESCRIPTION))):null}}}]);
//# sourceMappingURL=vendor-details-time-picker-tsx~920ea92e.c895c1b233f57c8fd1b3.esm.js.map